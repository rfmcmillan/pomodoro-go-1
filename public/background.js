(()=>{"use strict";const{storage:e,tabs:t,runtime:o,alarms:r}=chrome;let s,i;chrome.action.onClicked.addListener((e=>{t.create({url:"index.html"})})),{active:!1,sessionTime:0,init:async function(){try{this.active||(r.clearAll((()=>{console.log("alarms are cleared")})),this.listenForAlarm(),this.active=!0)}catch(e){console.log("issue with start up in background js",e)}},listenForAlarm:function(){return r.onAlarm.addListener((function(t){"startTimer"===t.name&&(chrome.notifications.create(void 0,{type:"basic",title:"Your focus session is complete!",message:"Nice job! You deserve a break!",iconUrl:"logo-pomo.png",requireInteraction:!0,silent:!1},(()=>{console.log("last error: ",o.lastError)})),e.local.set({alarmCreated:!1,currentSession:{},timerOn:!1,sessionTime:0,sessionComplete:!0}))}))}}.init(),t.onUpdated.addListener((function(e,o){o.url&&new Promise((e=>{chrome.storage.local.get(["blackList"],(t=>{e(t.blackList)}))})).then((r=>{if(r)for(let s=0;s<r.length;s++)o.url.includes(r[s])&&r[s].length&&t.update(e,{url:"https://pomodoro-go-1.herokuapp.com/blocked"})}))})),o.onMessage.addListener(((e,t,o)=>{"START_TIMER"===e.cmd?(i=new Date(e.when),s=setTimeout((()=>{chrome.alarms.create("startTimer",{when:Date.now()}),i=0}),i.getTime()-Date.now())):"GET_TIME"===e.cmd&&o({time:i})}))})();
//# sourceMappingURL=background.js.map